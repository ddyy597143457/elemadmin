(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e776bf5e"],{2532:function(e,t,a){"use strict";var o=a("23e7"),n=a("5a34"),i=a("1d80"),l=a("ab13");o({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~String(i(this)).indexOf(n(e),arguments.length>1?arguments[1]:void 0)}})},2800:function(e,t,a){"use strict";var o=a("77ac"),n=a.n(o);n.a},"44e7":function(e,t,a){var o=a("861d"),n=a("c6b6"),i=a("b622"),l=i("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==n(e))}},"5a34":function(e,t,a){var o=a("44e7");e.exports=function(e){if(o(e))throw TypeError("The method doesn't accept regular expressions");return e}},7524:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"视频名称"}},[a("el-input",{attrs:{placeholder:"视频名称"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),a("el-button",{attrs:{plain:""},on:{click:e.addVideo}},[e._v("添加视频")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","max-height":"400"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"}}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{prop:"cover",label:"视频",width:"200",height:"50"},scopedSlots:e._u([{key:"default",fn:function(e){return a("div",{},[a("img",{attrs:{src:e.row.cover,width:"100",height:"50"}})])}}])}),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"160"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleEdit(t)}}},[e._v("编辑")]),2==t.row.status?a("el-button",{attrs:{loading:t.row.loading,type:"success",size:"small"},on:{click:function(a){return e.pass(t)}}},[e._v("通过")]):e._e(),1==t.row.status?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.canclePass(t)}}},[e._v("取消通过")]):e._e()]}}])})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteSelected()}}},[e._v("删除")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.passSelected()}}},[e._v("通过")]),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(t){return e.nopassSelected()}}},[e._v("取消通过")])],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"prev-text":"上一页","next-text":"下一页"},on:{"current-change":e.curChange}})],1),a("el-dialog",{attrs:{title:"视频信息编辑",visible:e.showVideoEditDialog},on:{"update:visible":function(t){e.showVideoEditDialog=t}}},[a("edit-video",{attrs:{vd:e.videoData},on:{closeparentdialog:e.closeDialog}})],1)],1)},n=[],i=(a("4160"),a("caad"),a("d81d"),a("2532"),a("159b"),a("5530")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-video"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"视频名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"35","show-word-limit":""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"视频类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"视频类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("el-option",{attrs:{label:"美女",value:"beati"}}),a("el-option",{attrs:{label:"情感",value:"emotion"}}),a("el-option",{attrs:{label:"搞笑",value:"funny"}}),a("el-option",{attrs:{label:"音乐",value:"music"}}),a("el-option",{attrs:{label:"游戏",value:"game"}})],1)],1),a("el-form-item",{attrs:{label:"封面图片"}},[a("el-upload",{attrs:{action:"","show-file-list":!1,"auto-upload":!1,"on-change":e.coverOnchange}},[a("div",{staticClass:"cover"},[e.dialogImageUrl?a("img",{staticClass:"avatar",attrs:{src:e.dialogImageUrl}}):a("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file"}})])])])],1),a("el-form-item",{attrs:{label:"视频文件"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,"auto-upload":!0,"show-file-list":!1,"on-change":e.uploadVideoChange,"on-progress":e.uploadVideoProgress}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1),a("div",{staticClass:"upload-show-area"},[a("div",[e._v(e._s(this.ruleForm.video_name))]),e.uploading?a("el-progress",{attrs:{percentage:0}}):e._e()],1)],1),a("el-form-item",{staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-button",{on:{click:function(t){return e.handleCloseParentDialog(null)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保 存")])],1)],1)],1)},s=[],r=(a("b0c0"),a("2f62")),c={name:"EditVideo",props:{vd:Object},data:function(){return{disabled:!1,uploadUrl:"",dialogImageUrl:"",uploading:!1,ruleForm:{id:"",name:"",type:"",cover:"",video:"",video_name:""},rules:{name:[{required:!0,message:"请输入视频名称",trigger:"blur"},{min:1,max:35,message:"最长35个字符",trigger:"blur"}],type:[{required:!0,message:"请选择视频类型",trigger:"change"}]}}},mounted:function(){this.uploadUrl="http://192.168.13.56/upload"},computed:Object(i["a"])({},Object(r["c"])(["activeTabName","tabList"])),methods:{handleCloseParentDialog:function(e){this.$emit("closeparentdialog",e)},coverOnchange:function(e){var t=this,a=e.raw,o=new FileReader;o.readAsDataURL(a),o.onload=function(e){t.dialogImageUrl=e.target.result,t.ruleForm.cover=e.target.result}},uploadVideoChange:function(e){this.ruleForm.video_name=e.raw.name,this.uploading=!0,console.log(e)},uploadVideoProgress:function(e,t){console.log(e,t)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=t.$loading({lock:!0,spinner:"",background:"rgba(0, 0, 0, 0.7)"});t.disabled=!0,t.axios.post("/video/edit",t.ruleForm).then((function(e){if(a.close(),t.disabled=!1,200===e.status){var o=e.data;"success"===o.result&&(t.$message({message:"视频信息编辑成功",type:"success"}),setTimeout((function(){t.handleCloseParentDialog(t.ruleForm)}),1200))}else t.$message({message:e.responseText,type:"error"})}))}}))}},watch:{vd:{immediate:!0,handler:function(e){e&&(this.dialogImageUrl=e.cover,this.ruleForm.id=e.id,this.ruleForm.name=e.name,this.ruleForm.type=e.type,this.ruleForm.cover=e.cover,this.ruleForm.date=e.date,this.ruleForm.video_name=e.video_name)}}}},u=c,d=(a("2800"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"11d15433",null),p=m.exports,g={name:"Video",components:{EditVideo:p},data:function(){return{selection:[],formInline:{user:"",region:""},page:1,per_page:5,total:0,tableData:[],showVideoEditDialog:!1,curIndex:"",videoData:""}},mounted:function(){this.getTableList()},methods:{onSubmit:function(){},getSelectedIds:function(){var e=this.selection.map((function(e){return e.id}));return e},deleteSelected:function(){var e=this.getSelectedIds();console.log(e)},passSelected:function(){var e=this,t=this.getSelectedIds();this.tableData.forEach((function(a,o){t.includes(a.id)&&(a.status=1,e.$set(e.tableData,o,a))}))},nopassSelected:function(){var e=this,t=this.getSelectedIds();console.log(t),this.$confirm("取消通过后前端页面将不展示，确定要取消通过吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.tableData.forEach((function(a,o){t.includes(a.id)&&(a.status=2,console.log(o),e.$set(e.tableData,o,a))})),e.$message({message:"取消通过成功",type:"success"})}))},handleSelectionChange:function(e){this.selection=e},handleEdit:function(e){this.curIndex=e.$index,this.showVideoEditDialog=!0,this.videoData=e.row},pass:function(e){var t=this,a=e.$index,o=e.row;o.loading=!0,this.$set(this.tableData,a,o),setTimeout((function(){o.status=1,o.loading=!1,t.$message({message:"通过成功",type:"success"}),t.$set(t.tableData,a,o)}),1e3)},canclePass:function(e){var t=this;this.$confirm("取消通过后前端页面将不展示，确定要取消通过吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=e.$index,o=e.row;o.status=2,t.$set(t.tableData,a,o),t.$message({message:"取消通过成功",type:"success"})}))},closeDialog:function(e){if(e){console.log("newValue",e);var t=this.tableData[this.curIndex];t=Object.assign(t,e),console.log("row",t),this.$set(this.tableData,this.curIndex,t)}this.showVideoEditDialog=!1},getTableList:function(){var e=this,t="/video/list";this.axios.get(t).then((function(t){var a=t.data.data.list;a.forEach((function(e){e.loading=!1})),e.tableData=a,e.total=20}))},addVideo:function(){this.$router.push("/video/add")},curChange:function(e){console.log(e)}},computed:Object(i["a"])({},Object(r["c"])(["activeTabName","tabList"]))},h=g,f=Object(d["a"])(h,o,n,!1,null,"9f7f7c3a",null);t["default"]=f.exports},"77ac":function(e,t,a){},ab13:function(e,t,a){var o=a("b622"),n=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,"/./"[e](t)}catch(o){}}return!1}},caad:function(e,t,a){"use strict";var o=a("23e7"),n=a("4d64").includes,i=a("44d2"),l=a("ae40"),s=l("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!s},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d81d:function(e,t,a){"use strict";var o=a("23e7"),n=a("b727").map,i=a("1dde"),l=a("ae40"),s=i("map"),r=l("map");o({target:"Array",proto:!0,forced:!s||!r},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-e776bf5e.1961c066.js.map