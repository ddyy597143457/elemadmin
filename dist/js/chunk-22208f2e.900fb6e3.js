(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22208f2e"],{"245b":function(e,t,a){"use strict";var l=a("70ac"),o=a.n(l);o.a},"60a3":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-video"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"视频名称",prop:"name"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{maxlength:"35","show-word-limit":""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"视频类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"视频类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("el-option",{attrs:{label:"美女",value:"beati"}}),a("el-option",{attrs:{label:"情感",value:"emotion"}}),a("el-option",{attrs:{label:"搞笑",value:"funny"}}),a("el-option",{attrs:{label:"音乐",value:"music"}}),a("el-option",{attrs:{label:"游戏",value:"game"}})],1)],1),a("el-form-item",{attrs:{label:"封面图片"}},[a("el-upload",{attrs:{action:"","show-file-list":!1,"auto-upload":!1,"on-change":e.coverOnchange}},[a("div",{staticClass:"cover"},[e.dialogImageUrl?a("img",{staticClass:"avatar",attrs:{src:e.dialogImageUrl}}):a("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file"}})])])])],1),a("el-form-item",{attrs:{label:"视频文件"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,"auto-upload":!0,"show-file-list":!1,"on-change":e.uploadVideoChange,"on-progress":e.uploadVideoProgress}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1),a("div",{staticClass:"upload-show-area"},[a("div",[e._v(e._s(this.ruleForm.videoName))]),a("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],attrs:{percentage:0}})],1)],1),a("el-form-item",{staticStyle:{"margin-top":"30px"}},[a("el-button",{on:{click:e.handleReturn}},[e._v("返 回")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1)},o=[],r=(a("b0c0"),a("5530")),s=a("2f62"),i={name:"AddVideo",data:function(){return{uploadUrl:"",dialogImageUrl:"",uploading:!1,ruleForm:{name:"",type:"",cover:"",video:"",videoName:""},rules:{name:[{required:!0,message:"请输入视频名称",trigger:"blur"},{min:1,max:35,message:"最长35个字符",trigger:"blur"}],type:[{required:!0,message:"请选择视频类型",trigger:"change"}]}}},mounted:function(){this.uploadUrl="http://192.168.13.56/upload"},computed:Object(r["a"])({},Object(s["c"])(["activeTabName","tabList"])),methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])(["updateTab"])),{},{handleReturn:function(){var e;e=this.$removeTab("添加视频",this.tabList),this.updateTab({tabList:e}),this.$router.push("/video/list")},coverOnchange:function(e){var t=this,a=e.raw,l=new FileReader;l.readAsDataURL(a),l.onload=function(e){t.dialogImageUrl=e.target.result,console.log(t.dialogImageUrl)}},uploadVideoChange:function(e){this.ruleForm.videoName=e.raw.name,this.uploading=!0,console.log(e)},uploadVideoProgress:function(e,t){console.log(e,t)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.axios.post("/video/add",t.ruleForm).then((function(e){if(200===e.status){var a=e.data;"success"===a.result&&t.$confirm("视频上传成功","提示",{confirmButtonText:"继续上传",cancelButtonText:"返回列表",type:"success"}).then((function(){})).catch((function(){t.handleReturn()}))}else t.$message({message:e.responseText,type:"error"})}))}))}})},n=i,u=(a("245b"),a("2877")),c=Object(u["a"])(n,l,o,!1,null,"374226f4",null);t["default"]=c.exports},"70ac":function(e,t,a){}}]);
//# sourceMappingURL=chunk-22208f2e.900fb6e3.js.map