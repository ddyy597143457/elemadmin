{"version":3,"sources":["webpack:///./src/views/video/AddVideo.vue?ceb3","webpack:///./src/views/video/AddVideo.vue?5520","webpack:///src/views/video/AddVideo.vue","webpack:///./src/views/video/AddVideo.vue?8f13","webpack:///./src/views/video/AddVideo.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","ruleForm","rules","staticStyle","model","value","callback","$$v","$set","expression","coverOnchange","dialogImageUrl","uploadUrl","uploadVideoChange","uploadVideoProgress","slot","_v","_s","videoName","directives","name","rawName","on","handleReturn","$event","submitForm","staticRenderFns","component"],"mappings":"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","file":"js/chunk-22208f2e.fa2d07e0.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddVideo.vue?vue&type=style&index=0&id=374226f4&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddVideo.vue?vue&type=style&index=0&id=374226f4&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-video\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"视频名称\",\"prop\":\"name\"}},[_c('el-input',{staticStyle:{\"width\":\"50%\"},attrs:{\"maxlength\":\"35\",\"show-word-limit\":\"\"},model:{value:(_vm.ruleForm.name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"name\", $$v)},expression:\"ruleForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"视频类型\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"视频类型\"},model:{value:(_vm.ruleForm.type),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"type\", $$v)},expression:\"ruleForm.type\"}},[_c('el-option',{attrs:{\"label\":\"美女\",\"value\":\"beati\"}}),_c('el-option',{attrs:{\"label\":\"情感\",\"value\":\"emotion\"}}),_c('el-option',{attrs:{\"label\":\"搞笑\",\"value\":\"funny\"}}),_c('el-option',{attrs:{\"label\":\"音乐\",\"value\":\"music\"}}),_c('el-option',{attrs:{\"label\":\"游戏\",\"value\":\"game\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"封面图片\"}},[_c('el-upload',{attrs:{\"action\":\"\",\"show-file-list\":false,\"auto-upload\":false,\"on-change\":_vm.coverOnchange}},[_c('div',{staticClass:\"cover\"},[(_vm.dialogImageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.dialogImageUrl}}):_c('div',{staticClass:\"el-upload el-upload--text\",attrs:{\"tabindex\":\"0\"}},[_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_c('input',{staticClass:\"el-upload__input\",attrs:{\"type\":\"file\",\"name\":\"file\"}})])])])],1),_c('el-form-item',{attrs:{\"label\":\"视频文件\"}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"action\":_vm.uploadUrl,\"auto-upload\":true,\"show-file-list\":false,\"on-change\":_vm.uploadVideoChange,\"on-progress\":_vm.uploadVideoProgress}},[_c('el-button',{attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"primary\"},slot:\"trigger\"},[_vm._v(\"选取文件\")])],1),_c('div',{staticClass:\"upload-show-area\"},[_c('div',[_vm._v(_vm._s(this.ruleForm.videoName))]),_c('el-progress',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.uploading),expression:\"uploading\"}],attrs:{\"percentage\":0}})],1)],1),_c('el-form-item',{staticStyle:{\"margin-top\":\"30px\"}},[_c('el-button',{on:{\"click\":_vm.handleReturn}},[_vm._v(\"返 回\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"upload-video\">\r\n<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n\r\n  <el-form-item label=\"视频名称\" prop=\"name\">\r\n    <el-input v-model=\"ruleForm.name\" maxlength=\"35\" show-word-limit style=\"width:50%\"></el-input>\r\n  </el-form-item>\r\n\r\n  <el-form-item label=\"视频类型\" prop=\"type\">\r\n    <el-select v-model=\"ruleForm.type\" placeholder=\"视频类型\">\r\n      <el-option label=\"美女\" value=\"beati\"></el-option>\r\n      <el-option label=\"情感\" value=\"emotion\"></el-option>\r\n      <el-option label=\"搞笑\" value=\"funny\"></el-option>\r\n      <el-option label=\"音乐\" value=\"music\"></el-option>\r\n      <el-option label=\"游戏\" value=\"game\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n\r\n  <el-form-item label=\"封面图片\">\r\n    <el-upload\r\n    action=\"\"\r\n    :show-file-list=\"false\"\r\n    :auto-upload=\"false\"\r\n    :on-change=\"coverOnchange\"\r\n    >\r\n      <div class=\"cover\">\r\n        <img v-if=\"dialogImageUrl\" :src=\"dialogImageUrl\" class=\"avatar\">\r\n        <div v-else  tabindex=\"0\" class=\"el-upload el-upload--text\">\r\n          <i class=\"el-icon-plus avatar-uploader-icon\"></i><input type=\"file\" name=\"file\" class=\"el-upload__input\">\r\n        </div>\r\n      </div>\r\n    </el-upload>\r\n  </el-form-item>\r\n\r\n  <el-form-item label=\"视频文件\">\r\n    <el-upload\r\n      class=\"upload-demo\"\r\n      ref=\"upload\"\r\n      :action=\"uploadUrl\"\r\n      :auto-upload=\"true\"\r\n      :show-file-list=\"false\"\r\n      :on-change = \"uploadVideoChange\"\r\n      :on-progress = \"uploadVideoProgress\"\r\n      >\r\n      <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\r\n    </el-upload>\r\n    <div class=\"upload-show-area\">\r\n      <div>{{this.ruleForm.videoName}}</div>\r\n      <el-progress :percentage=\"0\" v-show=\"uploading\"></el-progress>\r\n    </div>\r\n  </el-form-item>\r\n\r\n  <el-form-item style=\"margin-top:30px;\">\r\n    <el-button @click=\"handleReturn\">返 回</el-button>\r\n    <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\r\n  </el-form-item>\r\n\r\n</el-form>\r\n\r\n</div>\r\n</template>\r\n<script>\r\nimport {mapState,mapMutations} from 'vuex'\r\nexport default {\r\n    name: 'AddVideo',\r\n    data() {\r\n      return {\r\n        uploadUrl: '',\r\n        dialogImageUrl: '',\r\n        uploading:false,\r\n        ruleForm: {\r\n          name: '',\r\n          type: '',\r\n          cover: '',\r\n          video:'',\r\n          videoName:''\r\n        },\r\n        rules: {\r\n          name: [\r\n            { required: true, message: '请输入视频名称', trigger: 'blur' },\r\n            { min: 1, max: 35, message: '最长35个字符', trigger: 'blur' }\r\n          ],\r\n          type: [\r\n            { required: true, message: '请选择视频类型', trigger: 'change' }\r\n          ],\r\n        }\r\n      };\r\n    },\r\n    mounted() {\r\n      this.uploadUrl = process.env.VUE_APP_UPLOADURL\r\n    },\r\n    computed: {\r\n      ...mapState(['activeTabName','tabList'])\r\n    },\r\n    methods: {\r\n      ...mapMutations(['updateTab']),\r\n      handleReturn() {\r\n          let tabList;\r\n          tabList = this.$removeTab('添加视频',this.tabList);\r\n          this.updateTab({tabList});\r\n          this.$router.push('/video/list');\r\n      },\r\n      coverOnchange(file) {\r\n        let fileRaw = file.raw;\r\n        var f = new FileReader()\r\n        f.readAsDataURL(fileRaw);\r\n        f.onload = (e) => {\r\n            this.dialogImageUrl = e.target.result;\r\n            console.log(this.dialogImageUrl);\r\n        }\r\n      },\r\n      uploadVideoChange(file){\r\n        this.ruleForm.videoName = file.raw.name;\r\n        this.uploading = true;\r\n        console.log(file);\r\n      },\r\n      uploadVideoProgress(event, file) {\r\n        console.log(event, file);\r\n      },\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n              this.axios.post('/video/add',this.ruleForm).then((res) => {\r\n                if(res.status === 200) {\r\n                  const data = res.data;\r\n                  if(data.result === \"success\") {\r\n                    this.$confirm('视频上传成功', '提示', {\r\n                        confirmButtonText: '继续上传',\r\n                        cancelButtonText: '返回列表',\r\n                        type: 'success'\r\n                      }).then(() => {\r\n                      }).catch(() => {\r\n                          this.handleReturn();\r\n                      });\r\n                    }\r\n                } else {\r\n                  this.$message({\r\n                    message: res.responseText,\r\n                    type: 'error'\r\n                  });\r\n                }\r\n              });\r\n          }\r\n        });\r\n      },\r\n    }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  .avatar-uploader-icon {\r\n    font-size: 20px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .el-upload--text {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .cover\r\n      width 178px;\r\n      height 178px;\r\n      img \r\n        width 178px;\r\n        height 178px;\r\n  .el-upload__tip\r\n      margin-left 5px;\r\n  .upload-show-area\r\n    margin-top:10px;\r\n  .el-form-item\r\n    .el-button\r\n      margin-right 10px;\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddVideo.vue?vue&type=template&id=374226f4&scoped=true&\"\nimport script from \"./AddVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./AddVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddVideo.vue?vue&type=style&index=0&id=374226f4&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"374226f4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}